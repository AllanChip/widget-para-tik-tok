<script>
// Fun√ß√£o de inicializa√ß√£o para injetar o widget na p√°gina
(function() {
    // 1. Defini√ß√µes de Conte√∫do e Estilo (Vari√°veis)
    const logoUrl = 'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh9xdYKkxoIS3zEn7OsvlBIA5Ywhk1WHRCTx1MQ6dE_bTxEGo0PRCgITCdAa5pF7Ih0T_5cLQduiQ7cSeqyJ-31cspb3xsfYnk739bGQdhc7vf5rURkBTi6qFn2YtK_pXR1TghvHCY_CfN-vFH73jf8Iin9EXbobz-xw66rIMfBjuvHgmkyeo8pYK0KHaQe/w640-h640/nova%20logo%20circular.png';
    const qrCodeUrl = 'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiav93qCp22suAuFm4UMXLyAaSNMK7ep1dJzC1lPYgyikoBtlufQ50aMQVAwZhCGb50fRJ4xjy47L-V4WvV-mHeUYWg6mUCbxaz3qa_s0X8Z7IzXenRawASCbGaLaTKaK-_V5IGFRxf6x3rgAW9JIrrL9D0XQgwHkiElPUeNzcgVpCSwwe2ecL2QommffIS/s320-rw/QRCODE%20DO%20CANAL%20DE%20OFERTAS.png';
    const whatsappLink = 'https://www.whatsapp.com/channel/0029Vb620vHFcow2a90IDY0R';
    const soundUrl = 'https://assets.mixkit.co/active_storage/sfx/2574/2574-preview.mp3';

    // 2. Inje√ß√£o de Depend√™ncias (Tailwind e Fontes)
    
    // Injeta o script do Tailwind
    const tailwindScript = document.createElement('script');
    tailwindScript.src = 'https://cdn.tailwindcss.com';
    document.head.appendChild(tailwindScript);

    // Injeta os estilos CSS personalizados
    const styleElement = document.createElement('style');
    styleElement.textContent = `
        /* CORRE√á√ÉO: Substitu√≠do & por &amp; na URL da fonte para evitar erro XML */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&amp;display=swap');
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translate(-50%, -50%) scale(0.9); }
            to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }
        
        /* Chaveamento da Anima√ß√£o NEON */
        @keyframes neonPulse {
            0% { box-shadow: 0 0 5px #10b981, 0 0 10px #10b981; } /* Sombra verde esmeralda mais fraca */
            50% { box-shadow: 0 0 10px #059669, 0 0 20px #059669; } /* Sombra verde esmeralda mais forte */
            100% { box-shadow: 0 0 5px #10b981, 0 0 10px #10b981; }
        }

        .animate-fadeIn {
            animation: fadeIn 0.5s ease-out;
        }
        
        .neon-effect {
            animation: neonPulse 1.5s ease-in-out infinite;
        }
        
        /* Z-index alto e fonte para o container principal */
        #widget-livre-estilo {
            z-index: 9999;
            font-family: 'Inter', sans-serif;
            background-image: linear-gradient(135deg, #0f172a, #1e293b);
        }
        
        /* Classe para limitar o tamanho da imagem do QR Code */
        .qr-code-img {
            max-width: 130px; 
        }
    `;
    document.head.appendChild(styleElement);


    // 3. Estrutura HTML do Widget
    const htmlContent = `
        <div class='neon-effect fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-11/12 max-w-xs p-5 mx-auto rounded-3xl border-4 border-emerald-500 hidden' id='widget-livre-estilo'>

            <div class='text-center mb-3'>
                <img alt='Logo Livre Estilo 3D' class='h-14 mx-auto filter drop-shadow-lg' src='${logoUrl}'/>
            </div>

            <header class='text-center mb-5'>
                <h1 class='text-2xl sm:text-3xl font-extrabold text-white leading-tight'>
                    <span class='text-yellow-400'>üö®</span> LIVRE ESTILO OFERTAS! <span class='text-emerald-400'>üöÄ</span>
                </h1>
                <p class='text-sm sm:text-base text-gray-300 mt-1'>Seu Canal Exclusivo no WhatsApp Chegou!</p>
            </header>

            <div class='bg-white p-4 rounded-xl text-center shadow-inner mb-5'>
                <div class='w-full h-auto flex items-center justify-center border-3 border-dashed border-gray-300 p-1'>
                    <img alt='QR Code do Canal de Ofertas' class='qr-code-img h-auto' src='${qrCodeUrl}'/> 
                </div>
                <p class='mt-2 text-sm text-gray-700 font-bold'>Aponte a c√¢mera e entre agora!</p>
            </div>

            <div class='text-center p-3 bg-emerald-600/20 rounded-xl border border-emerald-500/50'>
                <p class='text-sm font-semibold text-emerald-300 mb-3'>
                    N√£o consegue escanear? Clique abaixo!
                </p>

                <a class='block w-full py-2 px-4 bg-emerald-500 text-white font-bold text-base rounded-full shadow-lg hover:bg-emerald-400 transition duration-150 transform hover:scale-105' href='${whatsappLink}' target='_blank'>
                    üåê ACESSE O CANAL AGORA!
                </a>

                <p class='text-xs text-gray-400 mt-3'>
                    Descontos imperd√≠veis, cupons e novidades primeiro para voc√™.
                </p>
                <div class='mt-2 text-xl'>
                    <span class='hover:animate-pulse'>üí∞</span>
                    <span class='hover:animate-pulse'>üéÅ</span>
                    <span class='hover:animate-pulse'>üì±</span>
                </div>
            </div>
        </div>
    `;

    // Injeta o HTML no corpo do documento
    document.body.insertAdjacentHTML('beforeend', htmlContent);

    
    // 4. L√≥gica de Exibi√ß√£o e Fechamento
    const widget = document.getElementById("widget-livre-estilo");
    const notificationSound = new Audio(soundUrl);

    // Adiciona a classe de anima√ß√£o e remove 'hidden'
    function showWidget() {
        if (!widget) return; 
        
        widget.classList.remove("hidden");
        // Adiciona a anima√ß√£o de fade-in
        widget.classList.add("animate-fadeIn");
        
        // Tenta tocar o som (com tratamento para bloqueio de autoplay)
        notificationSound.currentTime = 0;
        notificationSound.play().catch(() => {});
    }

    // Dispara a exibi√ß√£o inicial e a repeti√ß√£o
    setTimeout(showWidget, 1500); // Mostra 1.5s ap√≥s o carregamento inicial
    setInterval(showWidget, 180000); // Repete a cada 3 minutos (180000 ms)

    // L√≥gica para fechar o pop-up ao clicar fora
    document.addEventListener("click", (e) => {
        if (!widget) return; 
        // Verifica se o clique n√£o foi no pr√≥prio widget
        if (!widget.contains(e.target)) {
            widget.classList.remove("animate-fadeIn"); 
            widget.classList.add("hidden");
        }
    });
    
    // Evita que o pop-up feche se o usu√°rio estiver clicando dentro dele.
    if (widget) {
        widget.addEventListener("click", (e) => {
            e.stopPropagation(); 
        });
    }
})();
</script>
